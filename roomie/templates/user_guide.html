{% extends 'base.html' %}
{% load static %}

{% block title %}User Guide - RoomiePlatform{% endblock %}

{% block content %}
<div class="container-fluid py-5">
    <div class="row justify-content-center">
        <div class="col-lg-3">
            <!-- Navigation Sidebar -->
            <div class="card sticky-top mb-4" style="top: 2rem; z-index: 999;">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Guide Contents</h5>
                </div>
                <div class="list-group list-group-flush">
                    <a href="#getting-started" class="list-group-item list-group-item-action">Getting Started</a>
                    <a href="#finding-rooms" class="list-group-item list-group-item-action">Finding Rooms</a>
                    <a href="#listing-rooms" class="list-group-item list-group-item-action">Listing Rooms</a>
                    <a href="#messaging" class="list-group-item list-group-item-action">Messaging System</a>
                    <a href="#bookings" class="list-group-item list-group-item-action">Managing Bookings</a>
                    <a href="#profile" class="list-group-item list-group-item-action">Your Profile</a>
                    <a href="#safety" class="list-group-item list-group-item-action">Safety & Trust</a>
                    <a href="#support" class="list-group-item list-group-item-action">Support & Help</a>
                </div>
            </div>

            <!-- Quick Tips Box -->
            <div class="card border-success mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">ðŸ’¡ Quick Tips</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex">
                            <i class="fas fa-check-circle text-success me-2 mt-1"></i>
                            <span>Complete your profile to improve matches</span>
                        </li>
                        <li class="list-group-item d-flex">
                            <i class="fas fa-check-circle text-success me-2 mt-1"></i>
                            <span>Use filters to narrow your search</span>
                        </li>
                        <li class="list-group-item d-flex">
                            <i class="fas fa-check-circle text-success me-2 mt-1"></i>
                            <span>Message multiple potential roommates</span>
                        </li>
                        <li class="list-group-item d-flex">
                            <i class="fas fa-check-circle text-success me-2 mt-1"></i>
                            <span>Always verify before making payments</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Need Help Box -->
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Need Help?</h5>
                </div>
                <div class="card-body">
                    <p>Have more questions or need assistance?</p>
                    <div class="d-grid gap-2">
                        <a href="{% url 'faq' %}" class="btn btn-outline-primary">
                            <i class="fas fa-question-circle me-2"></i>FAQ
                        </a>
                        <a href="{% url 'support_home' %}" class="btn btn-primary">
                            <i class="fas fa-headset me-2"></i>Contact Support
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-9">
            <!-- User Guide Header -->
            <div class="bg-light p-4 rounded-3 mb-4">
                <h1 class="display-5 fw-bold text-primary mb-2">Roomie Platform User Guide</h1>
                <p class="lead">Welcome to your comprehensive guide to using Roomie Platform. This guide will help you navigate through all features and get the most out of your experience.</p>
            </div>

            <!-- Getting Started Section -->
            <div class="card shadow-sm mb-5" id="getting-started">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Getting Started</h2>
                </div>
                <div class="card-body p-4">
                    <div class="row mb-4">
                        <div class="col-md-7">
                            <h3 class="h5 mb-3 fw-bold">Creating Your Account</h3>
                            <p>Setting up your account is the first step to finding your perfect roommate:</p>
                            <ol>
                                <li>Click on the <strong>"Register"</strong> button in the top navigation bar</li>
                                <li>Fill out your basic information including name, email, and password</li>
                                <li>Choose your account type: <span class="badge bg-primary">Room Provider</span> if you have rooms to offer, or <span class="badge bg-success">Room Seeker</span> if you're looking for accommodation</li>
                                <li>Verify your email address through the confirmation link sent to you</li>
                                <li>Complete your profile with additional details to improve matching</li>
                            </ol>
                            <p class="fst-italic text-muted">Tip: A complete profile gets up to 4x more interest from potential roommates!</p>
                        </div>
                        <div class="col-md-5">
                            <div class="card h-100 bg-light">
                                <div class="card-body p-4 text-center">
                                    <i class="fas fa-user-plus fa-4x text-primary mb-3"></i>
                                    <h4 class="h5">Account Types</h4>
                                    <div class="d-flex justify-content-center gap-2 mb-3">
                                        <span class="badge bg-primary p-2">Room Provider</span>
                                        <span class="badge bg-success p-2">Room Seeker</span>
                                    </div>
                                    <p class="small text-muted mb-0">You can change your account type later in your account settings if needed.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="row">
                        <div class="col-md-7 order-md-2">
                            <h3 class="h5 mb-3 fw-bold">Navigating the Dashboard</h3>
                            <p>Your dashboard is your command center for all activities:</p>
                            <ul>
                                <li><strong>Quick Stats:</strong> View your messages, profile views, and listings/bookings at a glance</li>
                                <li><strong>Quick Actions:</strong> Access common tasks like listing a room or finding roommates</li>
                                <li><strong>Recent Activity:</strong> Track recent messages and updates</li>
                                <li><strong>Recommendations:</strong> See personalized room or roommate suggestions based on your preferences</li>
                            </ul>
                            <p class="bg-light p-2 rounded small"><i class="fas fa-lightbulb text-warning me-2"></i> Visit your dashboard daily to stay updated with new matches and messages!</p>
                        </div>
                        <div class="col-md-5 order-md-1">
                            <div class="card h-100 border-primary">
                                <div class="card-header bg-primary text-white">Dashboard Features</div>
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="icon-circle bg-primary text-white me-3" style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                                            <i class="fas fa-tachometer-alt"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0">Quick Stats</h5>
                                            <p class="small text-muted mb-0">Track your activity metrics</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="icon-circle bg-success text-white me-3" style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                                            <i class="fas fa-bolt"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0">Quick Actions</h5>
                                            <p class="small text-muted mb-0">Fast access to main features</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="icon-circle bg-info text-white me-3" style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                                            <i class="fas fa-lightbulb"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0">Recommendations</h5>
                                            <p class="small text-muted mb-0">Personalized suggestions</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Finding Rooms Section -->
            <div class="card shadow-sm mb-5" id="finding-rooms">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Finding Rooms</h2>
                </div>
                <div class="card-body p-4">
                    <div class="row mb-4">
                        <div class="col-lg-6">
                            <h3 class="h5 mb-3 fw-bold">Searching for Rooms</h3>
                            <p>Our advanced search helps you find the perfect room:</p>
                            <ol>
                                <li>Navigate to <strong>Find Rooms</strong> in the main menu</li>
                                <li>Use filters to narrow down your search:</li>
                                <ul>
                                    <li>Location and proximity</li>
                                    <li>Price range</li>
                                    <li>Room type (private, shared, entire place)</li>
                                    <li>Availability dates</li>
                                    <li>Amenities (furnished, utilities included, etc.)</li>
                                </ul>
                                <li>Browse through matching rooms with detailed descriptions, photos, and amenities</li>
                                <li>Save favorite listings for easy access later</li>
                            </ol>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100 bg-light">
                                <div class="card-body">
                                    <h3 class="h5 mb-3 fw-bold">Room Listing Details</h3>
                                    <p>Room listings include all the information you need to make an informed decision:</p>
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <tbody>
                                                <tr>
                                                    <th scope="row" width="40%">Photos</th>
                                                    <td>Multiple images of the room and common areas</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Location</th>
                                                    <td>Address and neighborhood information</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Pricing</th>
                                                    <td>Monthly rent and any additional costs</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Amenities</th>
                                                    <td>Furniture, utilities, parking, WiFi, etc.</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">House Rules</th>
                                                    <td>Policies on guests, pets, smoking, quiet hours</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Provider Rating</th>
                                                    <td>Reviews and ratings from previous tenants</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <div class="d-flex">
                            <div class="me-3">
                                <i class="fas fa-info-circle fa-2x"></i>
                            </div>
                            <div>
                                <h4 class="h5">Before Booking a Room</h4>
                                <ul class="mb-0">
                                    <li>Always message the provider with any questions</li>
                                    <li>Verify the location and amenities match your needs</li>
                                    <li>Check the provider's reviews and history</li>
                                    <li>When possible, arrange a virtual or in-person viewing</li>
                                    <li>Never send money outside our secure booking system</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Listing Rooms Section -->
            <div class="card shadow-sm mb-5" id="listing-rooms">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Listing Rooms</h2>
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-lg-7">
                            <h3 class="h5 mb-3 fw-bold">Creating Effective Room Listings</h3>
                            <p>Great listings attract great roommates. Here's how to create an effective listing:</p>
                            
                            <div class="mb-4">
                                <h4 class="h6 fw-bold">Start with the basics:</h4>
                                <ol>
                                    <li>Navigate to <strong>List a Room</strong> from your dashboard</li>
                                    <li>Add a descriptive title that highlights key features</li>
                                    <li>Set accurate monthly rent and any additional costs</li>
                                    <li>Specify room type (private, shared, entire place) and number of bedrooms</li>
                                    <li>Enter the exact location or neighborhood</li>
                                    <li>Set availability dates</li>
                                </ol>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="h6 fw-bold">Add high-quality photos:</h4>
                                <ul>
                                    <li>Upload clear, well-lit photos of the room</li>
                                    <li>Include images of common areas (kitchen, bathroom, living room)</li>
                                    <li>Show any special features or amenities</li>
                                    <li>Provide photos of the exterior and surrounding area</li>
                                </ul>
                                <p class="small text-muted fst-italic">Listings with 5+ quality photos receive 70% more interest!</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="h6 fw-bold">Write a detailed description:</h4>
                                <ul>
                                    <li>Be specific about room dimensions and features</li>
                                    <li>List all amenities (furnished, utilities, WiFi, etc.)</li>
                                    <li>Describe the neighborhood and nearby conveniences</li>
                                    <li>Mention transportation options and commute times</li>
                                    <li>Be upfront about house rules and expectations</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div class="card border-success mb-4">
                                <div class="card-header bg-success text-white">
                                    <h4 class="h5 mb-0">Provider Checklist</h4>
                                </div>
                                <div class="card-body">
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check1">
                                        <label class="form-check-label" for="check1">
                                            Clear, attractive title
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check2">
                                        <label class="form-check-label" for="check2">
                                            Accurate pricing information
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check3">
                                        <label class="form-check-label" for="check3">
                                            5+ high-quality photos
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check4">
                                        <label class="form-check-label" for="check4">
                                            Detailed room description
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check5">
                                        <label class="form-check-label" for="check5">
                                            All amenities listed
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check6">
                                        <label class="form-check-label" for="check6">
                                            House rules clearly stated
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="check7">
                                        <label class="form-check-label" for="check7">
                                            Correct location information
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="check8">
                                        <label class="form-check-label" for="check8">
                                            Availability dates updated
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h4 class="h5 mb-3">Managing Your Listings</h4>
                                    <p>After creating your listing:</p>
                                    <ul>
                                        <li><strong>Respond quickly</strong> to inquiries</li>
                                        <li><strong>Keep availability</strong> up to date</li>
                                        <li><strong>Update photos</strong> if anything changes</li>
                                        <li><strong>Review booking requests</strong> carefully</li>
                                        <li><strong>Manage multiple rooms</strong> through your dashboard</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional sections (messaging, bookings, etc.) would follow the same pattern -->
            <!-- For brevity, I'll just include section headings for the remaining sections -->

            <!-- Messaging System Section -->
            <div class="card shadow-sm mb-5" id="messaging">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Messaging System</h2>
                </div>
                <div class="card-body p-4">
                    <div class="alert alert-light border">
                        <p>Our secure messaging system lets you communicate with potential roommates or room providers without sharing personal contact information until you're ready.</p>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h3 class="h5 mb-3 fw-bold">Starting Conversations</h3>
                            <ul>
                                <li>Click "Contact" on any user profile or room listing</li>
                                <li>Write a clear, friendly initial message</li>
                                <li>Include specific questions about the room or person</li>
                                <li>Mention your timeline and preferences</li>
                            </ul>
                            <div class="card bg-light p-3 mb-4">
                                <h6>Sample First Message Template:</h6>
                                <p class="small mb-0">"Hi [Name], I'm interested in your [room/property] in [Location]. I'm looking to move in around [date] and your place seems to meet my needs. I particularly like [specific feature]. Could you tell me more about [specific question]? I'm [brief personal description]. Looking forward to hearing from you!"</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h3 class="h5 mb-3 fw-bold">Managing Conversations</h3>
                            <ul>
                                <li>Access all messages from the "Messages" section</li>
                                <li>Messages are sorted by most recent</li>
                                <li>Unread messages are clearly marked</li>
                                <li>Set notification preferences in Account Settings</li>
                                <li>Block users if needed from their profile page</li>
                            </ul>
                            <div class="card border-warning p-3">
                                <h6 class="text-warning"><i class="fas fa-exclamation-triangle me-2"></i>Safety Tips:</h6>
                                <ul class="small mb-0">
                                    <li>Keep communications on the platform until you're ready to meet</li>
                                    <li>Don't share financial information through messages</li>
                                    <li>Report suspicious messages to our support team</li>
                                    <li>Arrange first meetings in public places</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Managing Bookings Section -->
            <div class="card shadow-sm mb-5" id="bookings">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Managing Bookings</h2>
                </div>
                <div class="card-body">
                    <p>This section explains how to book rooms as a seeker and manage booking requests as a provider.</p>
                    <!-- Full booking management content would go here -->
                </div>
            </div>

            <!-- Your Profile Section -->
            <div class="card shadow-sm mb-5" id="profile">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Your Profile</h2>
                </div>
                <div class="card-body">
                    <p>Learn how to optimize your profile to attract the right roommates or rooms.</p>
                    <!-- Full profile management content would go here -->
                </div>
            </div>

            <!-- Safety & Trust Section -->
            <div class="card shadow-sm mb-5" id="safety">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Safety & Trust</h2>
                </div>
                <div class="card-body">
                    <p>Important guidelines for safely using the platform and building trust with other users.</p>
                    <!-- Full safety content would go here -->
                </div>
            </div>

            <!-- Support & Help Section -->
            <div class="card shadow-sm" id="support">
                <div class="card-header bg-primary text-white py-3">
                    <h2 class="h3 mb-0">Support & Help</h2>
                </div>
                <div class="card-body">
                    <p>How to get help when you need it, including support tickets and contact information.</p>
                    <!-- Full support content would go here -->
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 100,
                    behavior: 'smooth'
                });
                
                // Update active state in sidebar
                document.querySelectorAll('.list-group-item').forEach(item => {
                    item.classList.remove('active');
                });
                this.classList.add('active');
            }
        });
    });
    
    // Set active section based on scroll position
    window.addEventListener('scroll', function() {
        const sections = document.querySelectorAll('.card[id]');
        const navItems = document.querySelectorAll('.list-group-item');
        
        let currentSection = '';
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop - 150;
            const sectionHeight = section.offsetHeight;
            
            if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
                currentSection = '#' + section.getAttribute('id');
            }
        });
        
        if (currentSection) {
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === currentSection) {
                    item.classList.add('active');
                }
            });
        }
    });
    
    // Initialize checkboxes with localStorage if available
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('.form-check-input');
        
        // Load saved state
        checkboxes.forEach(checkbox => {
            const isChecked = localStorage.getItem(checkbox.id) === 'true';
            checkbox.checked = isChecked;
            
            // Save state on change
            checkbox.addEventListener('change', function() {
                localStorage.setItem(this.id, this.checked);
            });
        });
    });
</script>
{% endblock %}